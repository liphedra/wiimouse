/*!
 * \file nunchuck_filter_joy.c
 *
 * \brief 
 *
 *
 * \date Apr 9, 2011
 * \author Dan Riedler
 *
 */

/*-----------------------------------------------------------------------------
 Includes
------------------------------------------------------------------------------*/
#include "nunchuck_filter_joy.h"


/*-----------------------------------------------------------------------------
 Defines
------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
 Macros
------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
 Typedefs
------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
 Local Function Prototypes
------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
 Data Members
------------------------------------------------------------------------------*/


//*****************************************************************************
//
// Exported Functions
//
//*****************************************************************************

//*****************************************************************************//

// TODO: actually filter the joystick data
PROTECTED void NunchuckFilterJoystickData( void )
{
    uint8 newest;

    newest = NunchuckRawData.NextPoint - 1;
    if(newest > NunchuckRawData.TotalDataPtCount) newest = NunchuckRawData.TotalDataPtCount - 1;

    NunchuckProcessedData.Data.Joystick.X = NunchuckRawData.DataPts[newest].Joystick.X - NunchuckSettings.Calibration.JoyStick.X.Neutral;
    NunchuckProcessedData.Data.Joystick.Y = NunchuckSettings.Calibration.JoyStick.Y.Neutral - NunchuckRawData.DataPts[newest].Joystick.Y;
}


//*****************************************************************************
//
// Local Functions
//
//*****************************************************************************

